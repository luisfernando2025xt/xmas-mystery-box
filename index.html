<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>XMAS Mystery Box</title>

<style>
    body {
        margin: 0;
        background: #000;
        color: #fff;
        font-family: "Courier New", monospace;
        overflow-y: auto; /* IMPORTANT: scroll enabled */
        padding-bottom: 200px;
    }

    .container {
        text-align: center;
        max-width: 600px;
        margin: 40px auto;
        padding: 20px;
    }

    button {
        background: none;
        border: 2px solid #fff;
        padding: 12px 25px;
        color: #fff;
        font-size: 18px;
        cursor: pointer;
        transition: 0.3s;
        margin-top: 20px;
    }

    button:hover {
        background: #fff;
        color: #000;
    }

    #ascii-box {
        margin-top: 30px;
        white-space: pre;
        display: none;
        opacity: 0;
        transition: opacity 1s ease-in-out;
    }

    #typing, #name-input-section, #letter-section, #final-santa {
        display: none;
        opacity: 0;
        transition: opacity 1s ease-in-out;
        font-size: 16px;
        margin-top: 20px;
    }

    .snowflake {
        position: fixed;
        top: -10px;
        color: white;
        font-size: 12px;
        opacity: 0.8;
        pointer-events: none;
        animation: fall linear infinite;
    }

    @keyframes fall {
        to { transform: translateY(110vh); }
    }

</style>
</head>

<body>

<div class="container">
    <h1>XMAS Mystery Box</h1>
    <button onclick="startMystery()">Open Mystery Box</button>

    <div id="ascii-box"></div>
    <div id="typing"></div>

    <div id="name-input-section">
        <p>Do you want to claim your Santa Letter?</p>
        <p>Enter your name:</p>
        <input id="nameInput" type="text" maxlength="20" style="font-size:20px;padding:5px;text-align:center;">
        <button onclick="saveName()">Continue</button>
    </div>

    <div id="letter-section">
        <p id="letterText" style="white-space:pre-line;text-align:left;"></p>
        <button onclick="showNextSentence()">Continue Letter</button>
    </div>

    <div id="final-santa"></div>
</div>

<script>
// ASCII ART
const asciiArt = `
          * *.  
        *     *  
       *  o o  *  
      *    ‚àÜ    *  
       *  ---  *  
        *     *  
          * *       
`;

// POWERFUL INTRO MESSAGES
const messages = [
"It started quietly‚Ä¶ a soft pull in the air, as if something was reaching for you.",
"You didn‚Äôt notice it, but the world had already begun rearranging itself in your favor.",
"Sometimes destiny doesn‚Äôt knock‚Äîit whispers, and tonight it whispered your name.",
"Maybe you‚Äôve felt it‚Ä¶ that strange mix of fear and excitement when something big is coming.",
"Life has been holding something behind its back‚Ä¶ waiting for you to be ready to receive it."
];

// LONG SANTA LETTER (sentence by sentence)
const santaLetter = [
"Ho ho ho‚Ä¶ I‚Äôve been watching you closer than you think.",
"This year wasn‚Äôt easy, was it?",
"And yet, you kept moving‚Äîeven on days when your energy was low.",
"Most people quit before magic happens, but not you.",
"You pushed through moments you never gave yourself credit for.",
"I saw the way you handled your silent battles.",
"I saw the strength you didn‚Äôt show the world.",
"And I wrote something for you because of that courage.",
"There is a gift making its way toward your life‚Ä¶ slowly, steadily, unavoidably.",
"Something you thought was lost is returning‚Äîstronger.",
"You will soon understand why certain chapters had to end.",
"The next version of you will look back at today and smile.",
"Because you‚Äôre closer than you think.",
"And the world is about to reveal something meant only for you.",
"Now keep reading‚Ä¶ because your turning point is already on its way."
];

let sentenceIndex = 0;
let userName = "";

function typeWriter(text, element, speed = 40, callback=null) {
    let i = 0;
    element.style.display = "block";
    const interval = setInterval(() => {
        element.textContent += text.charAt(i);
        i++;
        if (i >= text.length) {
            clearInterval(interval);
            if (callback) callback();
        }
    }, speed);
}

function startMystery() {
    const artBox = document.getElementById("ascii-box");
    const typing = document.getElementById("typing");

    artBox.style.display = "block";
    artBox.textContent = asciiArt;

    setTimeout(() => artBox.style.opacity = 1, 300);

    const randomMessage = messages[Math.floor(Math.random() * messages.length)];

    setTimeout(() => {
        typeWriter(randomMessage, typing, 35, () => {
            typing.style.opacity = 1;

            setTimeout(() => {
                showNameInput();
            }, 1200);
        });
    }, 800);

    createSnow();
}

function showNameInput() {
    const section = document.getElementById("name-input-section");
    section.style.display = "block";
    setTimeout(() => section.style.opacity = 1, 300);

    const input = document.getElementById("nameInput");

    // Mask typing
    input.addEventListener("input", function() {
        let stars = "";
        for (let i = 0; i < input.value.length; i++) stars += "*";
        input.setAttribute("type", "password");
    });
}

function saveName() {
    const input = document.getElementById("nameInput");
    userName = input.value.trim();

    if (userName.length < 1) return alert("Please enter a name.");

    document.getElementById("name-input-section").style.display = "none";
    showLetter();
}

function showLetter() {
    const section = document.getElementById("letter-section");
    section.style.display = "block";
    setTimeout(() => section.style.opacity = 1, 300);

    showNextSentence();
}

function showNextSentence() {
    if (sentenceIndex >= santaLetter.length) {
        showFinalSanta();
        return;
    }

    const letterText = document.getElementById("letterText");
    letterText.textContent += santaLetter[sentenceIndex] + "\n\n";
    sentenceIndex++;
}

function showFinalSanta() {
    const final = document.getElementById("final-santa");
    final.style.display = "block";
    setTimeout(() => final.style.opacity = 1, 300);

    final.innerHTML = `
    <pre style="font-size:14px; white-space:pre; text-align:center;">
       üéÖ‚ú® Santa saved a present just for you‚Ä¶
       
       üéÅ <strong>${userName}</strong>

       "This year‚Ä¶ you earned more than you think."
    </pre>
    `;
}

function createSnow() {
    for (let i = 0; i < 40; i++) {
        const snow = document.createElement("div");
        snow.classList.add("snowflake");
        snow.textContent = "*";
        snow.style.left = Math.random() * 100 + "vw";
        snow.style.animationDuration = 2 + Math.random() * 3 + "s";
        document.body.appendChild(snow);

        setTimeout(() => snow.remove(), 5000);
    }
}

</script>

</body>
</html>
